<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>API Documentation - Number Lookup Service</title>
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 40px;
Â  Â  Â  Â  Â  Â  background-color: #f4f6f9;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 900px;
Â  Â  Â  Â  Â  Â  margin: auto;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  color: #1a73e8;
Â  Â  Â  Â  Â  Â  border-bottom: 3px solid #e0e0e0;
Â  Â  Â  Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  color: #4285f4;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #e0e0e0;
Â  Â  Â  Â  Â  Â  padding-bottom: 8px;
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  }
Â  Â  Â  Â  h3 {
Â  Â  Â  Â  Â  Â  color: #34a853;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  code, pre {
Â  Â  Â  Â  Â  Â  background-color: #e6eefc;
Â  Â  Â  Â  Â  Â  border: 1px solid #c8dafc;
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin: 10px 0;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }
Â  Â  Â  Â  code.inline {
Â  Â  Â  Â  Â  Â  display: inline;
Â  Â  Â  Â  Â  Â  padding: 2px 5px;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  }
Â  Â  Â  Â  .method {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  padding: 3px 8px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  margin-right: 10px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  font-size: 0.85em;
Â  Â  Â  Â  }
Â  Â  Â  Â  .get { background-color: #34a853; }
Â  Â  Â  Â  .post { background-color: #fbbc04; }
Â  Â  Â  Â  .warning {
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background-color: #fce8e6;
Â  Â  Â  Â  Â  Â  border-left: 5px solid #ea4335;
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .info {
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background-color: #e6f7ff;
Â  Â  Â  Â  Â  Â  border-left: 5px solid #4285f4;
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .endpoint-group {
Â  Â  Â  Â  Â  Â  border-left: 4px solid #fbbc04;
Â  Â  Â  Â  Â  Â  padding-left: 15px;
Â  Â  Â  Â  Â  Â  margin-bottom: 40px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <h1>ğŸ” Number Lookup API Documentation</h1>
Â  Â  Â  Â  <p>This API provides lookup services for numbers, with features including client-specific caching, security, and abuse prevention.</p>

Â  Â  Â  Â  <p><strong>Base URL:</strong> <code class="inline">{{ base_url }}</code></p>
Â  Â  Â  Â  <p><strong>Example Client API Key:</strong> <code class="inline">{{ example_api_key }}</code></p>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="warning">
Â  Â  Â  Â  Â  Â  <strong>Security Note:</strong> All client endpoints require a valid API Key passed via the <code>X-API-Key</code> header or <code>?key</code> query parameter.
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <h2>ğŸš¦ API Usage & Rate Limiting</h2>
Â  Â  Â  Â  <div class="info">
Â  Â  Â  Â  Â  Â  <p>This API uses a **Global Sliding Window Rate Limit** to prevent abuse. All API keys share the same limit.</p>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Current Limit:</strong> {{ rate_limit_count }} requests</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Window Size:</strong> {{ rate_limit_window }} seconds</li>
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  <p>If you exceed the limit, the API will return a <code>429 Too Many Requests</code> status and include a <code>Retry-After</code> header indicating when you can make the next request.</p>
Â  Â  Â  Â  </div>


Â  Â  Â  Â  <h2>Standard Client Endpoints</h2>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Lookup Single Number</h3>
Â  Â  Â  Â  Â  Â  <p>Retrieves information for a given number. It first checks the in-memory **Cache** using the client's custom **Time-To-Live (TTL)**. If not cached, it attempts to fetch data sequentially from all configured external APIs.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> <span class="method post">POST</span> <code>/</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Parameters (Can be Query, JSON Body, or Form Data)</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>number</code> (required): The number to look up.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>key</code> (required): Your API access key. **(Recommended: use <code>X-API-Key</code> header)**</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>fields</code> (optional): Comma-separated list of fields to return from the result object (e.g., <code>name,city,status</code>).</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h4>Example Request (cURL GET)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X GET "{{ base_url }}/?number=1234567890&fields=status,name" \
Â  Â  -H "X-API-Key: {{ example_api_key }}"</pre>

Â  Â  Â  Â  Â  Â  <h4>Example Response (Cache Hit)</h4>
Â  Â  Â  Â  Â  Â  <pre>{
Â  Â  "success": true,
Â  Â  "number": "1234567890",
Â  Â  "source": "cache", 
Â  Â  "cache_ttl_seconds": 86400,
Â  Â  "results": {
Â  Â  Â  Â  "status": "active",
Â  Â  Â  Â  "name": "John Doe"
Â  Â  },
Â  Â  "...api_info...": "..."
}</pre>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>View Usage Statistics</h3>
Â  Â  Â  Â  Â  Â  <p>View your API usage counts, including total successful lookups and cache hits.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> <code>/stats</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Example Request (cURL)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X GET "{{ base_url }}/stats" \
Â  Â  -H "X-API-Key: {{ example_api_key }}"</pre>

Â  Â  Â  Â  Â  Â  <h4>Example Response</h4>
Â  Â  Â  Â  Â  Â  <pre>{
Â  Â  "success": true,
Â  Â  "user_id": "UserA",
Â  Â  "usage_statistics": {
Â  Â  Â  Â  "success_count": 1500,
Â  Â  Â  Â  "cache_hit_count": 950
Â  Â  },
Â  Â  "cache_ttl_seconds": 86400,
Â  Â  "rate_limit_settings": "{{ rate_limit_count }} per {{ rate_limit_window }}s (Global)",
Â  Â  "...api_info...": "..."
}</pre>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Health Check</h3>
Â  Â  Â  Â  Â  Â  <p>Checks the API's current operational status and the status of the persistent JSON 'database' file.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> <code>/health</code></p>
Â  Â  Â  Â  Â  Â  <p><strong>*Requires no key.*</strong></p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  

Â  Â  Â  Â  <h2>ğŸ‘‘ Administration Endpoints</h2>
Â  Â  Â  Â  <div class="warning">
Â  Â  Â  Â  Â  Â  All Admin Endpoints require the <code>X-Admin-Key</code> header to be set to the **Master Admin Key** (<code>{{ master_admin_key }}</code>).
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Add Client API Key</h3>
Â  Â  Â  Â  Â  Â  <p>Creates a new API key and sets its associated user, cache TTL, and optional expiration date.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method post">POST</span> <code>/admin/add_key</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Parameters</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>key</code> (required): The new API key string.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>user_id</code> (required): The user/client name.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>ttl</code> (optional): Cache TTL in seconds (e.g., <code>3600</code> for 1 hour).</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>expires_at</code> (optional): ISO format expiration date (e.g., <code>2026-01-01T00:00:00Z</code>).</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h4>Example Request (Add Key with TTL and Expiration)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/add_key" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}" \
Â  Â  -d "key=CLIENT_KEY_003&user_id=ClientC&ttl=7200&expires_at=2026-10-20T12:00:00Z"</pre>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Delete Client API Key</h3>
Â  Â  Â  Â  Â  Â  <p>Deletes an API key and removes all its associated usage data and settings.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method post">POST</span> <code>/admin/delete_key</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Example Request (Delete Key)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/delete_key?key=KEY_TO_REMOVE" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}"</pre>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Manage IP Blocklist</h3>
Â  Â  Â  Â  Â  Â  <p>Lists, adds, or removes IP addresses that are instantly blocked from accessing the API.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> / <span class="method post">POST</span> <code>/admin/ip_blocklist</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Parameters</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>ip</code> (required for POST): The IP address to manage.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>action</code> (required for POST): Either <code>add</code> or <code>remove</code>.</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h4>Example Request (Add IP)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/ip_blocklist?ip=192.0.2.1&action=add" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}"</pre>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Manage User-Agent Blocklist</h3>
Â  Â  Â  Â  Â  Â  <p>Lists, adds, or removes User-Agent strings that are instantly blocked from accessing the API.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> / <span class="method post">POST</span> <code>/admin/ua_blocklist</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Parameters</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>ua</code> (required for POST): The User-Agent string to manage.</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>action</code> (required for POST): Either <code>add</code> or <code>remove</code>.</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h4>Example Request (Remove User-Agent)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/ua_blocklist?ua=Python%2Frequests&action=remove" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}"</pre>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Manage Global Configuration</h3>
Â  Â  Â  Â  Â  Â  <p>View and update global parameters like the Rate Limit settings and the default Cache TTL.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> / <span class="method post">POST</span> <code>/admin/config</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Updatable Fields (POST JSON/Form)</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>rate_limit_count</code> (int)</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>rate_limit_window</code> (int)</li>
Â  Â  Â  Â  Â  Â  Â  Â  <li><code>default_cache_expiry_seconds</code> (int)</li>
Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  <h4>Example Request (Update Rate Limit via POST JSON)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/config" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}" \
Â  Â  -H "Content-Type: application/json" \
Â  Â  -d '{"rate_limit_count": 20, "rate_limit_window": 30}'</pre>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="endpoint-group">
Â  Â  Â  Â  Â  Â  <h3>Manage CORS Origins</h3>
Â  Â  Â  Â  Â  Â  <p>View and update the set of allowed Cross-Origin Resource Sharing (CORS) origins for browser-based requests.</p>
Â  Â  Â  Â  Â  Â  <p><span class="method get">GET</span> / <span class="method post">POST</span> <code>/admin/cors_origins</code></p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <h4>Example Request (Add Origin)</h4>
Â  Â  Â  Â  Â  Â  <pre>curl -X POST "{{ base_url }}/admin/cors_origins?origin=https://my-frontend-app.com&action=add" \
Â  Â  -H "X-Admin-Key: {{ master_admin_key }}"</pre>
Â  Â  Â  Â  </div>

Â  Â  </div>
</body>
</html>